@page "/reports"
@using GPNA.AlarmControlSystem.Pages.Reports.Charts
@using GPNA.AlarmControlSystem.Pages.Monitoring.Components
@inject IJSRuntime JSRuntime

<div class="page-header">
    <div class="d-flex date-period-select">
        <input type="datetime-local" @bind="From" @bind:event="oninput" @onchange="async () => await OnParametersSetAsync()">
        <input type="datetime-local" @bind="To" @bind:event="oninput" @onchange="async () => await OnParametersSetAsync()">
    </div>
    <p class="page-title">УПНГ отчеты меретояха
        <b style="margin-left: 5px;">ТАЗОВСКОЕ</b>
        </p>
    <div class="d-flex gap-2">
        <TitleBarButton Title="Экспорт" FunctionButton="export" Action="DownloadFileFromStream"/>
    </div>
</div>
<div class="d-flex justify-content-between overflow-auto" style="padding-bottom: 26px;">
    <div class="priority-alarm-container">
        <PriorityAlarm Title="Общее кол-во сигнализаций" Value="@GeneralCount" Priority="total"/>
        <PriorityAlarm Title="Среднее кол-во критичных" Value="@AverageUrgent" Priority="critical"/>
        <PriorityAlarm Title="Title" Value="225" Priority="total"/>
    </div>
</div>

<div class="position-relative">
    <h4 class="chart-title position-absolute">Количество сигнализаций</h4>
    <div class="chart-container" style="margin-bottom: 30px;">
        @if (IncomingAlarms != null && IncomingAlarms.Count > 0)
        {
            <Chart1 Kpi="@inputKpi" IncomingAlarms="@IncomingAlarms"/>
        }
        else
        {
            <p>Нет данных.</p>
        }
    </div>

    <div class="d-flex gap-4 position-absolute">
        <h4 class="chart-title">Количество сигнализаций на АРМе</h4>
        <select>        
            <option value="УПНГ">УПНГ</option>
            <option value="БМУПН">БМУПН</option>
            <option value="Скважины">Скважины</option>
            <option value="Энергетика">Энергетика</option>
        </select>
    </div>
    <div class="chart-container">
        @if (IncomingAlarms != null && IncomingAlarms.Count > 0)
        {
            <Chart2 IncomingAlarms="@IncomingAlarms"/>
        }
        else
        {
            <p>Нет данных.</p>
        }
    </div>
</div>
