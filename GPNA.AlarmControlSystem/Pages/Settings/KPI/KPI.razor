@page "/settings/KPI"
@using GPNA.AlarmControlSystem.Pages.Main.Components.WorkStationView
@using GPNA.AlarmControlSystem.Models.Dto.Field
@using GPNA.AlarmControlSystem.Interfaces
@using GPNA.AlarmControlSystem.Models.Dto.Queries
@using GPNA.AlarmControlSystem.Models.Dto.Workstation
@using GPNA.AlarmControlSystem.Options
@using GPNA.AlarmControlSystem.Services
@using Microsoft.Extensions.Options
@using GPNA.AlarmControlSystem.Pages.Settings.KPI.Components
@inject IJSRuntime JsRuntime


<div class="page-main">
    <div class="page-header justify-content-center">
       <div class="d-flex align-items-center">
           <p>НАСТРОЙКИ KPI 
               
               <b>@FieldName</b> М/Р 
            <SelectObject LinksDictionary="FieldLinksDictionary" />
               
               ЦЕХА <b>@ArmName</b></p>
            <SelectObject LinksDictionary="ArmLinksDictionary" />
        </div>        
    </div>
    
    <div class="settings-container">
        @if (_journalSettings != default)
        {
            <div class="bg">
                <p class="title">ЖУРНАЛ СИГНАЛИЗАЦИЙ</p>
                <div class="btn-group">
                        <button class="btn btn-success" onclick="@(() => SetEditingJournalSettings(true))" disabled="@_editingJournalSettings">Изменить</button>
                        <button class="btn btn-warning" onclick="@(async () => await UpdateJournalSettings())" disabled="@(!_editingJournalSettings)">Сохранить</button>
                </div>
                <div class="stats-container">
                    <StatKPI Title="Критичный приоритет" @bind-Value="@(_journalSettings.UrgentPriority)" Enabled="_editingJournalSettings"></StatKPI>
                    <StatKPI Title="Высокий приоритет" @bind-Value="@(_journalSettings.HighPriority)" Enabled="_editingJournalSettings"></StatKPI>
                    <StatKPI Title="Низкий приоритет" @bind-Value="@(_journalSettings.LowPriority)" Enabled="_editingJournalSettings"></StatKPI>
                </div>
            </div>
        }
        <div class="bg">
            <p class="title">МОНИТОРИНГ</p>
            <div class="stats-container">
                <StatKPI Title="Входящие сигнализаци. Количество повторений" Value="29"></StatKPI>
                <StatKPI Title="Активные сигнализации. Длительность,ч"></StatKPI>
                <StatKPI Title="Имитационные параметры. Длительность,ч"></StatKPI>
                <StatKPI Title="Подавленные сигнализации. Длительность,ч"></StatKPI>
            </div>
        </div>
        <div class="bg">
            <p class="title">ЗАДАЧИ</p>
            <div class="stats-container">
                <StatKPI Title="Время ответа на задачу, сутки" Value="29"></StatKPI>
                <StatKPI Title="Просроченные"></StatKPI>
                <StatKPI Title="Выполненные вовремя"></StatKPI>
            </div>
        </div>
        <div class="bg">
            <p class="title">ОТЧЕТЫ</p>
            <div class="stats-container">
                <div class="d-flex justify-content-between">
                    <StatKPI Title="В час" Value="29"></StatKPI>
                    <StatKPI Title="Сутки"></StatKPI>
                </div>
                <StatKPI Title="Просроченные активные"></StatKPI>
                <StatKPI Title="Просроченные имитационные"></StatKPI>
                <StatKPI Title="Просроченные подавленные"></StatKPI>
            </div>
        </div>
        <div class="bg">
            <p class="title">ТАБЛИЦА ПЕРЕМЕННЫХ</p>
            <div class="stats-container">
                <StatKPI Title="Заполненность оценки рисков, %" Value="50"></StatKPI>
            </div>
        </div>
    </div>    
</div>