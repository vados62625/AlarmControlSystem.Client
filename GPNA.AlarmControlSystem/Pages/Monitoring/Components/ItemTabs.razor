@using GPNA.AlarmControlSystem.Models.Enums
@using GPNA.AlarmControlSystem.Extensions
@inject NavigationManager NavigationManager

@if (IsActive)
{
    <div class="tabs-item tabs-item-active">
        <p class="tabs-title tabs-title-active">
            @Title
        </p>
    </div>
}
else
{
    <div class="tabs-item" @onclick="Click">
        <p class="tabs-title">
            @Title
        </p>
        <span class="tabs-item-count">@Count</span>
    </div>
}

@code {
    [Parameter] public int? FieldId { get; set; }
    [Parameter] public int? WorkstationId { get; set; }
    [Parameter] public string? Title { get; set; }
    [Parameter] public AlarmTypeEnum AlarmTypeEnum { get; set; }
    [Parameter] public int Count { get; set; }
    [Parameter] public bool IsActive { get; set; }
    

    private string _href = string.Empty;

    protected override void OnParametersSet()
    {
        _href = $"/monitoring/?alarmType={(int)AlarmTypeEnum}&fieldId={FieldId}&workstationId={WorkstationId}";
        Title ??= AlarmTypeEnum.GetDescription();
    }

    void Click()
    {
        NavigationManager.NavigateTo(_href);
    }
}