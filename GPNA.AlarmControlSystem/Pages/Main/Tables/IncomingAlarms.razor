@using LocalDbStorage.Interfaces
@using LocalDbStorage.Repositories.Models
  
<div style="min-width:530px;">
        <h3 style="margin-top:50px;text-align: center;">@Title</h3>
        <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead class="thead-light">
                <tr>
                    <th colspan=2>@From.ToString("M") - @To.ToString("M")</th>
                    <th>Пн</th>
                    <th>Вт</th>
                    <th>Ср</th>              
                    <th>Чт</th>
                    <th>Пт</th> 
                    <th>Сб</th>
                    <th>Вс</th> 
                </tr>
            </thead>            
            <tbody>
                <tr>
                    <th colspan=2>УПНГ</th>
                    @*<td>@AlarmsOnDay[0]</td>
                    <td>@AlarmsOnDay[1]</td>
                    <td>@AlarmsOnDay[2]</td>
                    <td>@AlarmsOnDay[3]</td>
                    <td>@AlarmsOnDay[4]</td>
                    <td>@AlarmsOnDay[5]</td>
                    <td>@AlarmsOnDay[6]</td>*@
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                </tr>
                <tr>
                    <th colspan=2>БМУПН</th>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                </tr>
                <tr>
                    <th colspan=2>Скважины</th>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                </tr>
                <tr>
                    <th colspan=2>Энергетика</th>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                    <td>N/A</td>
                </tr>            
             </tbody>
        </table>
    </div>
    </div>

@code {
    [Inject] IIncomingAlarmService IncomingAlarmService { get; set; } = null!;

    [Parameter] public string? Title { get; set; } = "Входящие сигнализации"; 
    [Parameter] public List<List<IncomingAlarm>>? Alarms { get; set; }

    [CascadingParameter(Name = "From")] public DateTime From { get; set; }
    [CascadingParameter(Name = "To")] public DateTime To { get; set; }

    public List<int> AlarmsOnDay = new List<int>(7);




    protected override async Task OnInitializedAsync()    
    {


        //Получить список всех аварий Входящих/Активных/Подавленных за промежуток From - To 
        //IncomingAlarms = await RestService.GetAllIncomingAlarm();
        var incomingAlarms= await IncomingAlarmService.GetCountInHour(1, From, To);

        AlarmsOnDay.Add(0);
        AlarmsOnDay.Add(0);
        AlarmsOnDay.Add(0);
        AlarmsOnDay.Add(0);
        AlarmsOnDay.Add(0);
        AlarmsOnDay.Add(0);
        AlarmsOnDay.Add(0);
    }
}
